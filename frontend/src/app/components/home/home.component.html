<div class="container">
  <header class="home-header">
    <h1 class="text-center">Bem-vindo ao MovieLens</h1>
    <p class="text-center">Descubra novos filmes e compartilhe suas avaliações</p>
  </header>

  <section class="stats-section" *ngIf="movieStats">
    <div class="stats-cards">
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stats-value">{{ movieStats.total_movies | number }}</div>
          <div class="stats-label">Filmes</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stats-value">{{ movieStats.total_ratings | number }}</div>
          <div class="stats-label">Avaliações</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stats-value">{{ movieStats.average_rating | number:'1.1-1' }}</div>
          <div class="stats-label">Nota Média</div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <section class="top-movies-section">
    <div class="section-header">
      <h2>Filmes Mais Bem Avaliados</h2>
      <a mat-button color="primary" routerLink="/movies">Ver todos</a>
    </div>

    <div class="loading-container" *ngIf="loading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>

    <div class="error-message" *ngIf="error">
      <p>Não foi possível carregar os filmes. Por favor, tente novamente mais tarde.</p>
    </div>

    <div class="card-grid" *ngIf="!loading && !error">
      <app-movie-card *ngFor="let movie of topMovies" [movie]="movie"></app-movie-card>
    </div>
  </section>

  <section class="genres-section" *ngIf="movieStats && movieStats.top_genres">
    <h2>Gêneros Populares</h2>
    <div class="genres-list">
      <a mat-raised-button
         *ngFor="let genre of movieStats.top_genres"
         [routerLink]="['/search']"
         [queryParams]="{genre: genre.name}"
         class="genre-button">
        {{ genre.name }} ({{ genre.movie_count }})
      </a>
    </div>
  </section>
</div>